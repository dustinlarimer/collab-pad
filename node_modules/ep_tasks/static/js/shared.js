// var _ = require('ep_etherpad-lite/static/js/underscore');
// var tags = ['task-open', 'task-done'];

exports.collectContentPre = function(name, context){
	var tname = context.cls;
  var state = context.state; 
  var lineAttributes = state.lineAttributes

	//var now = new Date().getTime();
	//lineAttributes['timestamp'] = now;
	
	//console.log(context);
	//console.log("Created: " + now);

  var tagIndex = tname.indexOf("task-open");
  if(tagIndex !== -1){
    lineAttributes['task-open'] = 'task-open';
  }

  var tagIndex = tname.indexOf("task-done");
  if(tagIndex !== -1){
    lineAttributes['task-done'] = 'task-done';
  }
};

exports.collectContentPost = function(name, context){
	var tname = context.tname;
  var state = context.state;
  var lineAttributes = state.lineAttributes

  var tagIndex = tname.indexOf("task-open");
  if(tagIndex >= 0){
    delete lineAttributes['task-open'];
  }

  var tagIndex = tname.indexOf("task-done");       
  if(tagIndex >= 0){
    delete lineAttributes['task-done'];
  }
};